/* Copyright 2018, SiteSpect, Inc. All Rights Reserved. */
(function(f,w){var k=f.document,l=f.SS||{};f.SS=l;var n=f.encodeURIComponent;l.Cookie=function(){return{get:function(f,b){if(f){var a=k.cookie;var c=" "+f+"=";a=" "+a+";";var d=a.indexOf(c);0<=d?(d+=c.length,c=decodeURIComponent(a.substring(d,a.indexOf(";",d)))):c="";if(!c)return"";b&&(b=b.substr(0,1).toLowerCase());switch(b){case "s":return c;case "a":return c.split("\v");default:return c.match("\v")?c.split("\v"):c}}},set:function(h,b,a,c,d,g,e){h&&!/^(?:expires|max-age|path|domain|secure|HttpOnly)$/i.test(h)&&("object"===typeof b&&(b=b.join("\v")),a&&";"===a.toString().substr(0,1)?e=a:(g||(g="/"),d||(d=f.location.hostname.match(/^[\d.]+|(?:\.[\da-z\-]+)*[\da-z\-]+\.[\da-z\-]+$/i)[0]),"."!==d.substr(0,1)&&(d="."+d),c=c?";secure":"",e&&(e=e.toLowerCase(),e="lax"===e?";SameSite=Lax":"strict"===e?";SameSite=Strict":"none"===e&&c?";SameSite=None":""),null!=a&&(a=parseInt(a,10),isNaN(a)&&(a=0),a=";expires="+(new Date(+new Date+a)).toUTCString()),e=";path="+g+";domain="+d+a+e+c),h=n(h)+"="+n(b)+e,k.cookie=h)}}}();l.JSEvents=function(){function h(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent&&b.attachEvent("on"+a,c)}return{on:h,off:function(b,a,c){b.removeEventListener?b.removeEventListener(a,c,!1):b.detachEvent&&b.detachEvent("on"+a,c)},trgt:function(b){b||(b=f.event);b=b.target||b.srcElement||k;3===b.nodeType&&(b=b.parentNode);return b},ready:function(b){var a=!1,c=!1;var d=function(){if(!a){if(!k.body)return setTimeout(d,1);a=!0;b()}};if(k.addEventListener){var g=function(){k.removeEventListener("DOMContentLoaded",g,!1);d()};k.addEventListener("DOMContentLoaded",g,!1)}else if(k.attachEvent){g=function(){"complete"===k.readyState&&(k.detachEvent("onreadystatechange",g),d())};k.attachEvent("onreadystatechange",g);try{c=null===f.frameElement}catch(e){}k.documentElement.doScroll&&c&&function v(){if(!a){try{k.documentElement.doScroll("left")}catch(p){setTimeout(v,1);return}d()}}()}h(f,"load",d)}}}();l.TimerFactory=function(){function f(){var b=-1,a=-1;return{start:function(a){b=(a||new Date).getTime();return 0<b},stop:function(){a=(new Date).getTime();return 0<a},reset:function(){a=b=-1},diff:function(){if(0>=b)throw"Failure to Start Timer";if(0>=a)throw"Failure to Stop Timer";if(b>a)throw"Failure to Reset Timer";return(a-b)/1E3}}}return{get:function(){return new f}}}();l.EventTrack=function(){function h(b,a){var m=(new Date).getTime()+p,c=[],d;if("object"===typeof b){for(d=0;d<b.length;d++)b[d]="event"+d+"="+n(b[d]);b=b.join("&")}else b="event="+n(b);if(a&&"object"===typeof a){for(d in a)a.hasOwnProperty(d)&&(c[c.length]="value_"+n(d)+"="+n(a[d]));a=c.join("&")}else a="value="+n(null!==a?a:"");m=l+"?"+b+"&"+a+"&x="+m;c=e!==f.location.protocol;if(g!==f.location.host||c)m="//"+g+m,c&&(m=e+m);return m}function b(b,c){var m=b+"-b";b+="-1";if(f.navigator&&navigator.sendBeacon&&(q||f.event&&"unload"===f.event.type))try{var d=navigator.sendBeacon(m)}catch(r){d=!1}if(d)return!0;try{var e=f.ActiveXObject?new f.ActiveXObject("Microsoft.XMLHTTP"):new f.XMLHttpRequest;e.open("GET",b,!c)}catch(r){return!1}try{e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Accept","*/*")}catch(r){}try{e.send(null)}catch(r){if(r.number&1)return!1}c?a(e,this,0):e.onreadystatechange=function(){a(e,this,0)};t.push(e);return!0}function a(b,c,d){"undefined"===typeof f.__ssmMetricResponseReadyChange&&5>d?setTimeout(function(){a(b,c,d+1)},1E3):"undefined"!==typeof f.__ssmMetricResponseReadyChange&&f.__ssmMetricResponseReadyChange.forEach(function(a){a(b,c)})}function c(b,a,c){var e={url:h(b,a),sync:c,ran:0};u.push(e);g!==f.location.host||q?d(e):setTimeout(function(){q||d(e)},200);return!0}function d(a){if(!(1<++a.ran)){var c=a.url;a=a.sync;g===f.location.host&&b(c,a)||("https:"===e?(c+="-3",a=k.createElement("img"),a.src=c,a.id="SS.IMG"+p,a.style.width="0px",a.style.height="0px",k.body.appendChild(a),t.push(a)):(c+="-2",a=new Image,a.src=c,t.push(a)))}}var g=f.location.host,e=f.location.protocol,l="/__ssobj/track",p=Math.floor(99999999*Math.random()),t=[],u=[],q=!1;f.addEventListener("unload",function(){q=!0;for(var a=0;a<u.length;a++)d(u[a])});c.beaconPatched=!0;return{metric:c,rp:c,rpAsync:function(a,b){c(a,b,!1)},rpSync:function(a,b){c(a,b,!0)},r:t,setDomain:function(a){if(a=a.match(/^(?:(https?:)?\/\/)?([^\/]+)/)){var b=a[1];g=a[2];e=b||e}}}}();l.PageTimer=function(){function h(b,f){var d=!1;return function(){if(c&&!d&&(d=!0,a.stop()))try{var e=a.diff();1795>=e&&l.EventTrack.rp(b,e,f)}catch(p){}}}var b=l.JSEvents,a,c;return{time:function(d,g,e){a=l.TimerFactory.get();return(c=a.start(e))?(e=!1,"ready"===d?(b.ready(h(g,!1)),e=!0):"load"===d?(b.on(f,"load",h(g,!1)),e=!0):"dwell"===d?(b.on(f,"unload",h(g,!0)),e=!0):"abandon"===d&&(unloadEvent=h(g,!0),b.on(f,"unload",unloadEvent),b.on(f,"load",function(){b.off(f,"unload",unloadEvent)}),e=!0),e):!1}}}();l.Debug=function(){function h(b){b.filename.match(/scripterror/i);l.EventTrack.rp("js-error",{path:b.filename,line:b.lineno,error:b.message})}return{trackJSErrors:function(b){f.addEventListener("error",h,!1)}}}()})(this);/* Copyright 2017, SiteSpect, Inc. All Rights Reserved. */
var ss_dom_var=function(){"use strict";var t=1e3;var e=1e3;var i=[];var r=null;var n=[];var a={};var o;var s;var u;var c;var f=false;var d=false;var l=false;var v=[];var p={};var _=[];var h=[];var m;var g={};var y={childList:true,attributes:true,characterData:true,subtree:true};var b="data-ss-variation-applied";var w="(?#i)";var S=function(t){var e=window.SS||{};e.getAsmtData=function(){return t};window.SS=e};S();var E=function(){try{m=new MutationObserver(i)}catch(t){}function i(t){t.forEach(function(t){var e=n(t.target);if(!d&&document.body.contains(e)){var i=C(e);if(i){i.forEach(function(t){M(e,t)})}}});a()}function n(t){var e;var i=t;while(i){if(i.nodeType===Node.ELEMENT_NODE){e=e||i;if(i.getAttribute(b)||h.indexOf(t)>-1){return i}}i=i.parentNode}return e}function a(){h.forEach(function(t,e){if(!document.querySelector("["+b+'="'+e+'"]')){delete h[e];delete _[e]}})}function u(t,e){t.innerHTML=e}function v(t,e){Object.keys(e).forEach(function(i){t.style[i]=e[i]})}function w(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function E(t,e){try{e.apply(t)}catch(t){return false}}function A(t){if(!t.selector){return 0}if(!o(t)){return 0}var e=document.querySelectorAll(t.selector);var i=0;var r;for(r=0;r<e.length;r++){if(f&&typeof __ssedit!=="undefined"&&__ssedit.isVEContent(e[r])){continue}i+=O(e[r],t)}return i}function C(t){var e=t.getAttribute(b);if(e===null){e=h.indexOf(t);if(e===-1){e=h.length;h[e]=t;if(m&&!d){m.observe(t,y)}}t.setAttribute(b,e)}var i=_[e];if(!i){i=_[e]=[]}return i}function O(t,e){var i=C(t);if(i.indexOf(e)===-1){i.push(e);return M(t,e)}return 0}function M(i,n){if(!o(n)){return}var a;var p=(new Date).getTime();var _=0;if(l){return}while(_<n.applied.length&&n.applied[_]+e<p){_++}n.applied.push(p);if(_){n.applied.splice(0,_)}if(n.applied.length>=t){console.warn("Possible infinite loop detected, aborting");return 0}if(f){a=i.ss_revert||i.cloneNode(true)}if(n.html){u(i,n.html)}if(n.css){v(i,n.css)}if(n.attributes){w(i,n.attributes)}if(n.custom){E(i,n.custom)}if(!n.counted&&n.trigger_counted&&!g[n.campaign_id]){n.counted=true;g[n.campaign_id]=true;if(typeof c!=="function"){c=S}s({handler:c,payload:g,target_domain:r})}q(n.id,1);if(i.hasAttribute("data-sspvid")){var A=document.querySelector(n.selector);if(n.custom&&!A&&n.attributes&&n.attributes["data-sspvid"]){A=document.querySelector('[data-sspvid="'+n.attributes["data-sspvid"]+'"]')}if(A){if(n.custom){var C=["data-sspvid","data-ss-sole-change","data-sspv-control","data-ss-fe-edit-type","data-ss-display-name","data-ss-orig-order","data-ssmid","data-ss-metric-name"];C.forEach(function(t){if(i.hasAttribute(t)){A.setAttribute(t,i.getAttribute(t))}});var O=Array.prototype.slice.call(i.attributes).filter(function(t){return t.name.match(/^data-ss-(?:control-)?reference-node-/)});O.forEach(function(t){A.setAttribute(t.name,t.value)})}if(f){if(a){A.ss_revert=a}if(typeof __ssedit!=="undefined"){__ssedit.outlineEdited(A)}}if(!A.hasAttribute(b)&&i.hasAttribute(b)){A.setAttribute(b,i.getAttribute(b));var M=h.indexOf(i);if(M>-1){h[M]=A}if(m&&!d){m.observe(A,y)}}}}else if(i.hasAttribute("data-ssmid")&&f){if(typeof __ssedit!=="undefined"){__ssedit.outlineEdited(i)}}if(m){m.takeRecords()}return 1}function q(t,e){p[t]=p[t]||0;p[t]+=e;var i="#ssp_history_panel .ss_csf_applied_"+t;var r=document.querySelectorAll(i);for(var n=0;n<r.length;n++){if(p[t]){r[n].style.display="block"}else{r[n].style.display="none"}}}return A}();function A(t){if(!(t instanceof Array)){t=i}var e=t.map(E).reduce(function(t,e){return t+e},0);return e}function C(t){return!!(t&&t.match(/\(\?#[^)]+_ss-invert\)/))}function O(t){return t.replace(/\(\?#[^)]*\)/g,"")}function M(t){var e=t.indexOf(w)!==-1?"i":"";var i=O(t);return new RegExp(i,e)}function q(t){return typeof t!=="undefined"&&t!==null}o=function(){function t(t){try{return t.script_criterion()}catch(t){return false}}function e(t){var e=!!document.location.hash.match(M(t.hash_criterion));if(C(t.hash_criterion)){e=!e}return e}function i(t){var e=document.location.hash.indexOf("?")+1,i=[""];if(e){i=document.location.hash.substring(e).split("&")}return a(t.hashquery_name_criterion,t.hashquery_value_criterion,i)}function r(t){var e=!!document.location.pathname.match(M(t.path_criterion));if(C(t.path_criterion)){e=!e}return e}function n(t){var e=document.location.search.substring(1).split("&");return a(t.query_name_criterion,t.query_value_criterion,e)}function a(t,e,i){var r=C(t),n=C(e),a=M(t),o=M(e),s,u,c,f,d,l;for(s=0;s<i.length;s++){u=i[s].split("=");c=u.shift();d=!!c.match(a);if(r){d=!d}if(d){f=u.join("=");l=!!f.match(o);if(n){l=!l}if(l){break}}}return d&&l}return function(a){var o,s,u={Path:r,Hash:e,Query:n,HashQuery:i,Custom:t};var c=false;for(o=0;o<a.criteria.length;o++){s=a.criteria[o];if(q(s.GroupNumber)&&c&&q(s.Pre)&&q(a.criteria[s.Pre])&&s.GroupNumber===a.criteria[s.Pre].GroupNumber){continue}c=u[s.Type]&&u[s.Type](s);if(!c){if(!(q(s.GroupNumber)&&q(s.Next)&&q(a.criteria[s.Next])&&s.GroupNumber===a.criteria[s.Next].GroupNumber)){return false}}}return true}}();s=N({target:"/__ssobj/asmt_update"});u=N({target:"/__ssobj/api",alterRequest:function(t){t.setRequestHeader("X-SiteSpect-CSM-Url",window.location.href)}});function N(t){t=t||{};var e=t.target;var i=t.alterRequest;var r;var n=100;var a;var o;var s;function u(){d();var t=JSON.stringify(a),r=new XMLHttpRequest;if(s){s=s.replace(/\/$/,"")}var n=s?s+e:e;r.open("POST",n);if(i){i(r)}r.setRequestHeader("Content-Type","application/json;charset=UTF-8");r.withCredentials=true;r.addEventListener("load",c,false);r.send(t)}function c(t){var e;try{e=JSON.parse(t.target.response);if(typeof o==="function"){o(e,this)}T(e,0)}catch(t){}}function f(t){if(t&&r){d()}else if(r){return}r=setTimeout(u,n)}function d(){clearTimeout(r);r=null}return function(t){o=t.handler;a=t.payload;s=t.target_domain;if(!r){f()}}}function T(t,e){if(typeof window.__sscCSFCountStatusChange==="undefined"&&e<5){setTimeout(function(){T(t,e+1)},1e3)}else{if(typeof window.__sscCSFCountStatusChange!=="undefined"){window.__sscCSFCountStatusChange.forEach(function(e){e(t)})}}}function R(t){setTimeout(function(){d=!!t.is_ve_edit_mode},5e3)}function x(t){if(t){i=t.variations||i;a=t.timestamps||a;R(t);f=!!t.is_ve_edit_mode;r=t.current_domain}i.forEach(function(t){t.applied=t.applied||[]});v.forEach(function(t){t(i)})}function k(t){n=t?t.metrics||n:n}function V(t){v.push(t);t(i)}function L(t){return p[t]||0}function D(t){c=t}x(window.__ss_variations);k(window.__ss_variations);document.addEventListener("ready",function(){if(!i.length){x(window.__ss_variations)}if(!n.length){k(window.__ss_variations)}},false);function H(){if(f){l=true}}function j(){if(f){l=false}}function G(t){var e=t.identifying_attr_key;var r=t.identifying_attr_val;var n=t.identifying_script_content_regex;var a=t.new_selector;if(!f){return}Object.keys(i).forEach(function(t){var o=i[t];if(e&&o.attributes&&o.attributes[e]&&o.attributes[e]===r||n&&o.custom&&o.custom.toString().match(n)){o.selector=a}})}function P(t){var e=true;if(i.length&&!d){var r=t.getAttribute("data-sspvid");if(r){e=i.some(function(e){if(e.attributes&&e.attributes["data-sspvid"]===r){var i=t.getAttribute("data-ss-fe-edit-type")==="frontend_order";return!e.custom||i}})}}return e}function F(t){var e=[];var i={visits:[{AsmtCounted:[],Data:{}}]};t.forEach(function(t){i.visits[0].Data[t.id]={Hits:1};if(t.trigger_counting){t.vg_ids.forEach(function(t){if(e.indexOf(t)<=-1){e.push(t)}})}});if(e.length>0){i.visits[0].AsmtCounted=e}return i}function I(){var t=[];var e=false;n.forEach(function(i){if(o(i)){t.push(i);if(i.trigger_counting&&i.tc_ids&&i.tc_ids instanceof Array){i.tc_ids.forEach(function(t){if(!g[t]){g[t]=true;e=true}})}}});if(t.length>0){u({handler:function(t,e){function i(t,e){if(typeof window.__ssmCSMetricResponseReadyChange==="undefined"&&e<5){setTimeout(function(){i(t,e+1)},1e3)}else{if(typeof window.__ssmCSMetricResponseReadyChange!=="undefined"){window.__ssmCSMetricResponseReadyChange.forEach(function(e){e(t.getResponseHeader("SiteSpect-Metrics-Info"))})}}}i(e,0)},payload:F(t),target_domain:r});if(e){s({target_domain:r})}}}return{applyVariations:A,applySingleVariation:E,setVariations:x,setMetrics:k,registerVariationWatcher:V,checkVariationApplied:L,setAsmtCallback:D,pauseVariations:H,unpauseVariations:j,updateVariationSelector:G,isSafeToEdit:P,evaluateMetrics:I}}();(function(){"use strict";function t(t){var e={childList:true,attributes:true,subtree:true};var i;var r;var n;var a=t.callback;var o=document.querySelector("html");if(o){if(window.MutationObserver){r=new MutationObserver(c);i=o;n=r.observe.bind(r,i,e);n()}else{s(o)}}function s(t){t.addEventListener("DOMSubtreeModified",f,false)}function u(t){t.removeEventListener("DOMSubtreeModified",f,false)}function c(){if(r){r.disconnect()}var e=document.querySelectorAll(t.selector);if(e.length>0){a()}if(n){n()}}function f(){u(o);c();s(o)}}ss_dom_var.registerVariationWatcher(function(e){e.forEach(function(e){t({selector:e.selector,callback:ss_dom_var.applySingleVariation.bind(ss_dom_var,e)})})});var e=null;setInterval(function(){if(e===null||e!==window.location.href){e=window.location.href;ss_dom_var.evaluateMetrics()}},500)})();
/* Copyright 2016, SiteSpect, Inc. All Rights Reserved. */
if(!window.SS){window.SS={}}SS.SPA=function(){"use strict";var n=1;var i=document.querySelectorAll.bind(document);function t(t){var o={childList:true,attributes:true};var c;var u;var f="ss-modified-"+n++;var s=e.bind(null,t.dynamicContainer,f);var d;var l=t.callback||t.callbackFunction;if(i(t.staticContainer).length>0){if(window.MutationObserver){if(t.watchSubtree){o.subtree=true}u=new MutationObserver(S);c=i(t.staticContainer)[0];d=u.observe.bind(u,c,o);d()}else{a(i(t.staticContainer),v)}if(t.runCallbackNow){l()}}function v(n){n.addEventListener("DOMSubtreeModified",w,false)}function b(n){n.removeEventListener("DOMSubtreeModified",w,false)}function S(){if(u){u.disconnect()}var n=s(true);if(n.length>0){a(n,r.bind(null,f));l()}if(d){d()}}function w(){a(i(t.staticContainer),b);S();a(i(t.staticContainer),v)}}function e(n,t,e){var a=[n];if(e){a.push(":not(."+t+")")}return i(a.join(""))}function a(n,i){[].forEach.call(n,i)}function r(n,i){if(i.className.indexOf(n)===-1){i.className+=" "+n}}return{dynamicModify:t}}();